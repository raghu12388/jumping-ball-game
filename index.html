<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Helix Jump Mini</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#87CEEB;
  touch-action:none;
}
#ui{
  position:fixed;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.6);
  color:#fff;
  padding:6px 14px;
  border-radius:8px;
  font-family:Arial;
  z-index:10;
}
canvas{display:block;}
</style>
</head>

<body>
<div id="ui">Tap = Jump | Drag = Rotate</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
/* ---------- SCENE ---------- */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

/* ---------- CAMERA ---------- */
const camera = new THREE.PerspectiveCamera(70, innerWidth/innerHeight, 0.1, 100);
camera.position.set(0,3,6);

/* ---------- RENDERER ---------- */
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio,1.5));
document.body.appendChild(renderer.domElement);

/* ---------- LIGHT ---------- */
scene.add(new THREE.AmbientLight(0xffffff,0.7));
const light = new THREE.DirectionalLight(0xffffff,0.6);
light.position.set(5,10,5);
scene.add(light);

/* ---------- TOWER GROUP ---------- */
const towerGroup = new THREE.Group();
scene.add(towerGroup);

/* CENTER CYLINDER */
const tower = new THREE.Mesh(
  new THREE.CylinderGeometry(0.8,0.8,14,32),
  new THREE.MeshStandardMaterial({color:0x00e5ff})
);
tower.position.y=-2;
towerGroup.add(tower);

/* ---------- PLATFORMS ---------- */
const platforms=[];
for(let i=0;i<10;i++){
  const ring = new THREE.Mesh(
    new THREE.TorusGeometry(1.1,0.22,16,32),
    new THREE.MeshStandardMaterial({color:i%2?0x00ff66:0xffcc00})
  );
  ring.rotation.x=Math.PI/2;
  ring.position.y=2-i*1.3;
  towerGroup.add(ring);
  platforms.push(ring);
}

/* ---------- BALL ---------- */
const ball = new THREE.Mesh(
  new THREE.SphereGeometry(0.28,32,32),
  new THREE.MeshStandardMaterial({color:0xff0000})
);
ball.position.set(1.1,3,0);
scene.add(ball);

/* ---------- PHYSICS ---------- */
let velocity=0;
const gravity=-0.015;
let canJump=true;

/* ---------- JUMP ---------- */
function jump(){
  if(canJump){
    velocity=0.22;
    canJump=false;
  }
}
addEventListener("click",jump);
addEventListener("touchstart",jump);

/* ---------- ROTATION (DRAG) ---------- */
let isDragging=false;
let lastX=0;

function startDrag(e){
  isDragging=true;
  lastX = e.touches ? e.touches[0].clientX : e.clientX;
}
function drag(e){
  if(!isDragging) return;
  let x = e.touches ? e.touches[0].clientX : e.clientX;
  let delta = (x-lastX)*0.01;
  towerGroup.rotation.y += delta;
  lastX=x;
}
function endDrag(){ isDragging=false; }

addEventListener("mousedown",startDrag);
addEventListener("mousemove",drag);
addEventListener("mouseup",endDrag);

addEventListener("touchstart",startDrag);
addEventListener("touchmove",drag);
addEventListener("touchend",endDrag);

/* ---------- LOOP ---------- */
function animate(){
  requestAnimationFrame(animate);

  velocity+=gravity;
  ball.position.y+=velocity;

  platforms.forEach(p=>{
    const worldPos = p.getWorldPosition(new THREE.Vector3());
    if(
      ball.position.y < worldPos.y+0.18 &&
      ball.position.y > worldPos.y-0.18 &&
      velocity<0
    ){
      velocity=0.22;
      canJump=true;
    }
  });

  if(ball.position.y<-6){
    ball.position.y=3;
    velocity=0;
    canJump=true;
  }

  camera.position.y=ball.position.y+2.5;
  camera.lookAt(ball.position.x,ball.position.y,0);

  renderer.render(scene,camera);
}
animate();

/* ---------- RESIZE ---------- */
addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
















